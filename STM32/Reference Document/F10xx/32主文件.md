# 硬件主文件

## 1、STM32

### 1、GPIO读写操作

```c
// 该函数可以把值直接赋给寄存器，因为c语言不支持16进制，所以只能写成2进制的形式，如0x0001(STM32是32位)，可以对其进行按位取反的方式 如~。
GPIO_Write(GPIOA,value) 
```

### 2、杂项

1、stm32的引脚上电后，如果不初始化默认都是浮空输入。

2、oled显示函数，如果显示的值超过了规定长度，那么高位值（前面的值）会被截断

3、c语言支持16进制，不直接支持2进制的数。所以你在 OLED.Show_Bin_Num()里面需要写16进制的数，然后他会默认打印2进制的数。

4、中断响应是正常的流程，引脚电平变化触发中断。事件响应不会触发中断，而是出发别的外设操作，属于外设之间的联合工作。

5、AFIO主要用于引脚复用功能的选择和重定义，在STM32中，AFIO主要完成两个任务：复用功能引脚重映射和中断引脚选择。

6、定时器计数值等于重装值产生的中断，我们称之为更新中断。其产生的事件，我们称为更新事件，它不会触发中断，但会触发其他电路的工作。

7、TIM定时器中断中，外部时钟模式1使用外部输入脚作为计数器时钟的时钟源，而外部始终模式2使用外部触发输入作为计数器时钟的时钟源。

8、定时器一旦  tim_cmd（），即使能之后就会立刻开始计数，如果在配置过程中某些标志位没有及时清除或者NVIC没有准备好，就可能导致中断立刻触发，出现意外中断。

9、对于同一个定时器的同一个通道，输入捕获和输出比较在同一时间只能使用一个。并且每个定时器的ARR和计值相同，不同的只是 CRR。

10、在测量信号频率时，可以选择测频法和测周法。前者的原理是在一定时间内记录上升沿个数，该个数除以时间就是频率，适合高频信号。后者的原理是在待测信号的一个周期内（相邻两个上升沿时间内）记录标准信号上升沿个数，该个数乘上标准信号周期即为待测信号的周期，进而可以求出待测信号的频率，适合于低频信号。中界频率是测频法和测周法误差相等的点 。

![image-20251003173823754](C:\Users\osquer\Desktop\typora图片\image-20251003173823754.png)

11、当你把该通道设置为输出比较模式时，你可以设置CCR的值，用于和计数器的值作比较，输出pwm。当你把该通道设置为输入捕获模式是，当发生对应跳变，计数器的值就会写入CCR，通过测周法得到频率。

12、编码器是一个带方向控制的外部时钟，其对于输入信号而言，上升沿和下降沿均有效。输入捕获模块中的极性选择实际上是高低电平是否反转。
